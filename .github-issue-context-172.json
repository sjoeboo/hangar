{
  "type": "pull_request",
  "number": 172,
  "title": "feat: add top-level rename command",
  "body": "## Summary\n- Adds `agent-deck rename <id|title> <new-title>` as a discoverable top-level command for renaming sessions\n- Includes `mv` alias, `--json`/`--quiet` flags, and live tmux status bar sync via `SyncTmuxDisplayName()`\n- Follows the existing `handleRemove` pattern with shared `ResolveSession`, `loadSessionData`, and `CLIOutput` utilities\n\n## Test plan\n- [x] `go build ./cmd/agent-deck/` â€” compiles\n- [x] `go vet ./cmd/agent-deck/` â€” no warnings\n- [x] `go test ./cmd/agent-deck/...` â€” existing tests pass\n- [ ] Manual: `agent-deck rename <session> \"New Name\"` â€” verify title changes\n- [ ] Manual: `agent-deck rename <session> \"New Name\" --json` â€” verify JSON output\n- [ ] Manual: `agent-deck mv <session> \"New Name\"` â€” verify alias works\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)",
  "author": "nlenepveu",
  "url": "https://github.com/asheshgoplani/agent-deck/pull/172",
  "state": "open",
  "draft": false,
  "mergeable": null,
  "base_branch": "main",
  "head_branch": "feat/rename-command",
  "created_at": "2026-02-16T14:10:15Z",
  "updated_at": "2026-02-16T14:10:15Z",
  "additions": 75,
  "deletions": 0,
  "changed_files_count": 1,
  "labels": [],
  "files": [
    {
      "filename": "cmd/agent-deck/main.go",
      "status": "modified",
      "additions": 75,
      "deletions": 0,
      "patch": "@@ -202,6 +202,9 @@ func main() {\n \t\tcase \"remove\", \"rm\":\n \t\t\thandleRemove(profile, args[1:])\n \t\t\treturn\n+\t\tcase \"rename\", \"mv\":\n+\t\t\thandleRename(profile, args[1:])\n+\t\t\treturn\n \t\tcase \"status\":\n \t\t\thandleStatus(profile, args[1:])\n \t\t\treturn\n@@ -1271,6 +1274,77 @@ func handleRemove(profile string, args []string) {\n \t)\n }\n \n+func handleRename(profile string, args []string) {\n+\tfs := flag.NewFlagSet(\"rename\", flag.ExitOnError)\n+\tjsonOutput := fs.Bool(\"json\", false, \"Output as JSON\")\n+\tquiet := fs.Bool(\"quiet\", false, \"Minimal output\")\n+\tquietShort := fs.Bool(\"q\", false, \"Minimal output (short)\")\n+\n+\tfs.Usage = func() {\n+\t\tfmt.Println(\"Usage: agent-deck rename <id|title> <new-title>\")\n+\t\tfmt.Println()\n+\t\tfmt.Println(\"Rename a session by ID or title.\")\n+\t\tfmt.Println()\n+\t\tfmt.Println(\"Examples:\")\n+\t\tfmt.Println(\"  agent-deck rename abc12345 \\\"New Name\\\"\")\n+\t\tfmt.Println(\"  agent-deck rename \\\"Old Name\\\" \\\"New Name\\\"\")\n+\t\tfmt.Println(\"  agent-deck -p work rename abc12345 \\\"New Name\\\"   # Rename in 'work' profile\")\n+\t}\n+\n+\tif err := fs.Parse(normalizeArgs(fs, args)); err != nil {\n+\t\tos.Exit(1)\n+\t}\n+\n+\tquietMode := *quiet || *quietShort\n+\tout := NewCLIOutput(*jsonOutput, quietMode)\n+\n+\tidentifier := fs.Arg(0)\n+\tnewTitle := fs.Arg(1)\n+\tif identifier == \"\" || newTitle == \"\" {\n+\t\tout.Error(\"session ID/title and new title are required\", ErrCodeNotFound)\n+\t\tif !*jsonOutput {\n+\t\t\tfs.Usage()\n+\t\t}\n+\t\tos.Exit(1)\n+\t}\n+\n+\tstorage, instances, groups, err := loadSessionData(profile)\n+\tif err != nil {\n+\t\tout.Error(err.Error(), ErrCodeInvalidOperation)\n+\t\tos.Exit(1)\n+\t}\n+\n+\tinst, errMsg, errCode := ResolveSession(identifier, instances)\n+\tif inst == nil {\n+\t\tout.Error(fmt.Sprintf(\"%s (profile '%s')\", errMsg, storage.Profile()), errCode)\n+\t\tif errCode == ErrCodeNotFound {\n+\t\t\tos.Exit(2)\n+\t\t}\n+\t\tos.Exit(1)\n+\t}\n+\n+\toldTitle := inst.Title\n+\tinst.Title = newTitle\n+\tinst.SyncTmuxDisplayName()\n+\n+\tgroupTree := session.NewGroupTreeWithGroups(instances, groups)\n+\tif err := storage.SaveWithGroups(in"
    }
  ],
  "commits": [
    {
      "sha": "7727c75",
      "message": "feat: add top-level `rename` command for session renaming",
      "author": "Nicolas"
    }
  ],
  "reviews": [],
  "comments": [],
  "review_comments": [],
  "related": [],
  "detected_type": "feature"
}
